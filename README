================================================================================
 SYSTEM STATES
================================================================================

Main Module States:
OFF - power off
SRV - service mode (user settings and configures)
IDL - idle (dry conditions)
TRG - triggered (leakage detected)
HWT - aside mode (direct control engaged)

WiFi Module States:
DSC - power off and/or disconnected
STM - station mode
APM - access point mode

Processes:
reset - reboot
init  - initialization
setup - going to configure
alarm - leakage event and all measures
wait  - waiting for overriding controls
cont  - returnoing to normal operations

+-------+-------+-------+-------+-------+-------+
|   ..to|       |       |       |       |       |
|       |  OFF  |  SRV  |  IDL  |  TRG  |  HWT  |
|from.. |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+
|       |       |       |       |       |       |
|  OFF  |       | setup | init  |   X   |   X   |
|       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+
|       |       |       |       |       |       |
|  SRV  | reset |       |   X   |   X   |   X   |
|       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+
|       |       |       |       |       |       |
|  IDL  | reset |   X   |       | alarm | wait  |
|       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+
|       |       |       |       |       |       |
|  TRG  | reset |   X   |   X   |       | wait  |
|       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+
|       |       |       |       |       |       |
|  HWT  | reset |   X   | cont  | cont  |       |
|       |       |       |       |       |       |
+-------+-------+-------+-------+-------+-------+



        +--------------------------+------------------------------+
        |                   (reset)|                       (reset)|
        v                          |                              |
+---------------+       +----------------------+       +-----------------------+
| OFF           |(init) | IDL / HWT            |(alarm)| TRG / HWT             |
|               | ----> |                      | ----> |                       |
|   power off   |       | idle, sleep, waiting |       | alarm, sleep, waiting |
+---------------+       +----------------------+       +-----------------------+
      ^    |
      |    | (setup)    +----------------------+
      |    +----------> | SRV                  |
      |                 |                      |
      +---------------- | set up, reset, etc   |
              (reset)   +----------------------+



                        +----------------------+
                        | APM                  |
                    --> |                      |
+---------------+  /    | primary mode         |
| DSC           | -     +----------------------+
|       absent, |
| malfunction   | -     +----------------------+
+---------------+  \    | STM                  |
                    --> |                      |
                        | user defined network |
                        +----------------------+


